!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3"),require("canvg")):"function"==typeof define&&define.amd?define(["exports","d3","canvg"],e):e(t.data2grahics=t.data2grahics||{},t.D3,t.canvg)}(this,function(t,e,a){"use strict";function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steelblue";return t.append("defs").append("pattern").attr("id","hpattern-"+r).attr("x","0").attr("y","0").attr("width",1).attr("height",1).selectAll("rect").data(Q.range(0,1,1/e)).enter().append("rect").attr("y",function(t,e){return t*a}).attr("x",0).attr("width",800).attr("height",5).attr("fill",r)}function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[30,35],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:400;return t.append("defs").append("pattern").attr("id","vpattern1").attr("x","0").attr("y","0").attr("width","1").attr("height","1").selectAll("rect").data(Q.range(0,1,1/a)).enter().append("rect").attr("width",1).attr("height",30).attr("x",function(t,e){return t*r}).attr("y",0).attr("fill",function(t,a){var r="#e4be6f";return a<e[0]&&(r="#00ab84"),a>e[1]&&(r="#cb8d88"),r})}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:27,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steelblue",n=t.append("defs").append("pattern").attr("id","vpattern-"+r).attr("x","0").attr("y","0").attr("width","1").attr("height","1");return n.append("rect").attr("width",a).attr("fill",r).attr("height",2),n.selectAll("rect").data(Q.range(0,1,1/e).concat(0)).enter().append("rect").attr("width",1).attr("height",1e3).attr("x",function(t,e){return t*a}).attr("y",0).attr("fill",function(t,e){return r}),n}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[10,20,30,35],a=arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:70,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;return t.append("defs").append("pattern").attr("id","vpattern-vLineRect5-"+a).attr("x","0").attr("y","0").attr("width","1").attr("height","1").selectAll("rect").data(Q.range(0,1,1/r)).enter().append("rect").attr("width",2).attr("height",300).attr("x",function(t,e){return t*n}).attr("y",0).attr("fill",function(t,a){var r=J[0];return a<e[0]&&(r=J[0])||a<e[1]&&(r=J[1])||a<e[2]&&(r=J[2])||a<e[3]&&(r=J[3]),r})}function l(t,e){var a=document.createElementNS("http://www.w3.org/2000/svg","svg");return e&&(a.id=e),t.appendChild(a),a}function s(t){if(!t.querySelector("canvas")){var e=document.createElement("canvas");t.appendChild(e)}return e}function c(t){return Object.assign([],t)}function u(t){var e=void 0;if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(t))return 3==(e=t.substring(1).split("")).length&&(e=[e[0],e[0],e[1],e[1],e[2],e[2]]),e="0x"+e.join(""),"rgba("+[e>>16&255,e>>8&255,255&e].join(",")+",1)";throw new Error("Bad Hex")}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"rgba(250,128,114,1)",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;return t.replace(/[^,]+(?=\))/,e.toString())}function f(t,e,r){function n(t){t.call(L),t.select(".domain").remove(),t.selectAll(".tick text").attr("font-size",d.cnFontSize).attr("x",0).attr("dy",24),t.selectAll(".tick").append("text").attr("font-size",d.enFontSize).attr("class","en").attr("x",0).attr("dy",function(t,e){return 54}).text(function(t,e){return g[e]})}function i(t){t.call(R),t.select(".domain").remove(),t.selectAll(".tick:not(:first-of-type) line").attr("stroke","#ccc"),t.selectAll(".tick text").attr("x",4).attr("dy",-4)}function o(t,e){var a=[];return t.forEach(function(t,r,n){a[r]={x:t.x,y:t.y*e}}),a}function u(t){var e=c(t);return e.pop(),e.shift(),e}Array.prototype.extendArrBoundary=function(){var t=this[1].x-this[0].x;this[1].y,this[0].y;this.unshift({x:this[0].x-(t-.2),y:this[0].y}),this.push({x:this[this.length-1].x+(t-.2),y:this[this.length-1].y})};var d=e||$,f=r||H;if(d.cnFontSize!==f.cnFontSize||d.enFontSize!==f.enFontSize)throw new Error("fontsizes in two configs aren't unanimous!");var h=Object.keys(d.data),g=h.map(function(t,e){return d.data[t].en}),v=[],p=[];h.map(function(t,e){v.push({x:e+1,y:d.data[h[e]].value}),p.push({x:e+1,y:f.data[h[e]].value})}),v.extendArrBoundary(),p.extendArrBoundary();var x=_.line().defined(function(t){return t}).x(function(t){return S(t.x)}).y(function(t){return P(t.y)}).curve(_.curveBasis),y=l(t),m=s(t);y.setAttribute("width","1000"),y.setAttribute("height","500");var b={top:20,right:100,bottom:80,left:40},k=+(y=_.select("#"+t.id+" svg")).attr("width")-b.left-b.right,A=+y.attr("height")-b.top-b.bottom,q=y.append("g").attr("transform","translate("+b.left+","+b.top+")"),w=_.format(".1f"),S=_.scaleLinear().domain([1-.8,6.8]).range([0,k]),P=_.scaleLinear().domain([0,10]).range([A,0]),L=_.axisBottom(S).ticks(6).tickSize(0).tickFormat(function(t){return h[t-1]}),R=_.axisRight(P).ticks(10).tickSize(k).tickFormat(function(t){w(t/1e6)});q.append("g").attr("transform","translate(0,"+A+")").call(n),q.append("g").call(i),function(t,e){var a=JSON.parse(JSON.stringify(t));return a.forEach(function(a,r,n){t[r].y>e[r].y||(a.y=e[r].y)}),a}(v,p).forEach(function(t,e,a){e<7&&e>0&&q.append("g").datum([{x:t.x,y:0},{x:t.x,y:t.y}]).append("path").attr("fill","none").attr("stroke","steelblue").attr("stroke-width",1.5).attr("stroke-dasharray","3,3").attr("d",x)}),[v,p].forEach(function(t,e,a){t.map(function(a,r,n){if(r<t.length-1){var i=a,o=t[r+1],l=[i,{x:.75*i.x+.25*o.x,y:i.y},{x:.25*i.x+.75*o.x,y:o.y},o];y.datum(l).append("path").attr("fill","none").attr("stroke",function(t){return 0===e?"steelblue":"seagreen"}).attr("stroke-width",1.5).attr("transform","translate("+b.left+","+b.top+")").attr("d",x)}})});var M=function(t){t.forEach(function(t,e,a){t.map(function(a,r,n){if(r<t.length-1){var i=a,o=t[r+1],l=[i,{x:.75*i.x+.25*o.x,y:i.y},{x:.25*i.x+.75*o.x,y:o.y},o];y.datum(l).append("path").attr("transform","translate("+b.left+","+b.top+")").style("opacity",.3).attr("fill","none").attr("stroke",function(t,a){return 0===e?"steelblue":"seagreen"}).attr("stroke-width",1.5).attr("d",x)}})})};_.range(0,1,.02).forEach(function(t,e){var a=o(v,t),r=o(p,t);M([a,r])});var O=u(v),E=u(p);y.selectAll(".dot").data([].concat(O,E)).enter().append("circle").attr("transform","translate("+b.left+","+b.top+")").attr("fill","white").attr("stroke","steelblue").attr("stroke-width",1.5).attr("cx",x.x()).attr("cy",x.y()).attr("r",3.5);var j=v.pop(),z=p.pop(),B=parseFloat(x([j]).match(/,(\d|\.)+\Z/gi)[0].slice(1,-1)),F=parseFloat(x([z]).match(/,(\d|\.)+\Z/gi)[0].slice(1,-1));["æ£€æµ‹å€¼","æ ‡å‡†å€¼"].forEach(function(t,e){q.append("text").attr("transform",function(e){var a=void 0;Math.abs(F-B);return a=B<F?20:-20,"æ ‡å‡†å€¼"===t?"translate(880,"+(F+a)+")":"translate(880,"+(B-a)+")"}).attr("class","text"+e).attr("alignment-baseline","middle").attr("font-size",d.cnFontSize).text(function(e){return t})}),y.selectAll(".rightExtendLine").data(["rgba(73,130,180,0.6)","rgba(46,139,87,0.6)"]).enter().append("rect").attr("class","rightExtendLine").attr("x",900).attr("y",function(t,e){return[B,F][e]+19.3}).attr("width",100).attr("height",1.5).attr("fill",function(t,e){return t});var C=document.querySelector("#"+t.id+" svg");a(m,document.querySelector("#"+t.id+" svg").outerHTML),t.removeChild(C)}function h(t,e){function a(t){return[[t,o],[t,i+50]]}function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;t=Math.PI/2-t;var a=(i+50)*Math.cos(t)>=0;return[[(i+50)*Math.cos(t),-(i+50)*Math.sin(t)],[(i+50)*Math.cos(t)+(a?e:-e),-(i+50)*Math.sin(t)]]}var n=e||K,i=350,o=110,l=(i-o)/4,s=Object.keys(n.data);s.sort(function(t,e){return n.data[t].value-n.data[e].value});var c=Object.values(n.data).map(function(t,e){return t});c.sort(function(t,e){return t.value-e.value});var u=c.map(function(t,e){return t.value}),d=c.map(function(t,e){return t.color});t.querySelector("canvas")||t.appendChild(document.createElement("canvas"));var f=t.querySelector("canvas"),h=f.getContext("2d");f.width=1200,f.height=900;var g=f.width,v=f.height,p=Math.min(g,v)/2;window.devicePixelRatio&&(f.style.width=g+"px",f.style.height=v+"px",f.height=v*window.devicePixelRatio*2,f.width=g*window.devicePixelRatio*2,h.scale(2*window.devicePixelRatio,2*window.devicePixelRatio)),h.translate(g/2,v/2),h.lineWidth=1.5,h.save(),h.textBaseline="hanging",h.textAlign="center",h.fillStyle="#00ab84",h.font="24px adad",h.fillText(n.text,0,-10),h.restore(),h.save();p=[Z.range(o-10,o+l,10),Z.range(o+l,o+2*l,10),Z.range(o+2*l,o+3*l,10),Z.range(o+3*l,o+4*l+10,10)];h.globalAlpha=.8,p.forEach(function(t,e){h.strokeStyle="steelblue",p[e].forEach(function(t,e){h.save(),t===o-10?(h.setLineDash([4,0]),h.strokeStyle="#00ab84"):h.setLineDash([4,5]);var a=Z.arc().outerRadius(t).innerRadius(0).startAngle(0).endAngle(2*Math.PI).context(h);h.beginPath(),a(),h.stroke(),h.restore()})}),h.restore(),h.save();var x=Z.pie()(u);x.sort(function(t,e){return t-e});var y=Z.arc().innerRadius(o).context(h);x.forEach(function(t,e){h.save(),h.beginPath(),h.strokeStyle=d[e],Z.range(o,o+210-0,10).map(function(e,a){y.outerRadius(e)(t),h.stroke()}),h.restore()}),h.restore(),h.save(),h.strokeStyle="#0ab38d",h.fillStyle="#0ab38d",h.font="24px adad",h.textBaseline="middle";var m=Z.radialLine().curve(Z.curveLinear).context(h),b=Z.line().curve(Z.curveLinear).context(h);x.forEach(function(t,e){h.beginPath();var n=a(t.startAngle+.2),i=r(t.startAngle+.2,50);m(n),b(i),h.stroke();var o=s[e];i[1][0]>=0?h.fillText(o,i[1][0],i[1][1]):(console.log(o,o.length),h.fillText(o,i[1][0]-24*o.length,i[1][1]))}),h.restore()}function g(t,e,a){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.save(),r?(t.font="10px adad",t.rotate(-.015*e.length/2-.02)):t.rotate(-.04*e.length/2-.02);for(var n=0;n<e.length;n++)t.rotate(r?.018:.04),t.fillText(e[n],0,a);t.restore()}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,e=arguments[1];Array.prototype.scale=function(t,e){var a=[];return this.forEach(function(e,n,i){a[n]=[e[0],r+(e[1]-r)*t]}),a};var a=e||U,r=150,n=Object.keys(a.data),i=Object.values(a.data).map(function(t,e){return t.value});if(null===t.querySelector("canvas")){var o=document.createElement("canvas");t.appendChild(o)}var l=canvas.getContext("2d");canvas.width=1e3,canvas.height=900;var s=canvas.width,c=canvas.height;Math.min(s,c);l.translate(s/2,c/2+30),l.save(),l.save(),l.textBaseline="hanging",l.textAlign="center",l.fillStyle="#e4be6f",l.font="64px adad",l.fillText(a.score,0,-80),l.fillStyle="#00ab84",l.font="24px adad",l.fillText("ç»¼åˆæ‰“åˆ†",0,0),l.font="16px adad",l.fillText("Basal Metalbolic Assay",0,50),l.restore(),l.save();var u=["#cb8d88","#e4be6f","#00ab84","#e4be6f","#cb8d88"],d=[],f=4.2;d.push(V.range(150,166.8,f)),d.push(V.range(171,200.4,f)),d.push(V.range(204.6,292.8,f)),d.push(V.range(297,326.4,f)),d.push(V.range(330.6,351.6,f));var h=[150,166.8,200.4,292.8,326.4,351.6];l.globalAlpha=.3,d.forEach(function(t,e){l.strokeStyle=u[e],d[e].forEach(function(t,e){l.setLineDash([4,4]);var a=V.arc().outerRadius(t).innerRadius(0).startAngle(0).endAngle(2*Math.PI).context(l);l.beginPath(),a(),l.stroke()})}),l.globalAlpha=1,h.forEach(function(t,e){l.strokeStyle=u[e],l.setLineDash([10,0]);var a=V.arc().outerRadius(t).innerRadius(0).startAngle(0).endAngle(2*Math.PI).context(l);l.beginPath(),a(),l.stroke()}),l.restore(),l.save(),l.strokeStyle="#00ab84",l.globalAlpha=.7,l.setLineDash([4,0]),l.beginPath(),V.arc().outerRadius(140).innerRadius(0).startAngle(0).endAngle(2*Math.PI).context(l)(),l.stroke(),l.restore(),l.save();var v=[],p=[],x=Math.PI;l.globalAlpha=.9,i.map(function(t,e){var a=V.scaleLinear().domain([0,1]).range([r,350]),i=[2*x/n.length*e,a(t)];v.push(i)});var y=V.radialLine().curve(V.curveCatmullRomClosed.alpha(.9)).context(l);l.setLineDash([5,0]),l.strokeStyle="#00ab84",l.shadowColor="#00ab84",l.beginPath(),y(v),l.stroke(),l.restore(),l.save(),l.strokeStyle="#00ab84",l.beginPath(),l.globalAlpha=.3,V.range(0,1,.04).forEach(function(t,e){y(v.scale(t))}),l.stroke(),l.restore(),l.save(),l.beginPath(),l.lineWidth=2;l.strokeStyle="salmon",l.lineWidth=1;p.map(function(t){return t.scale(2.33)});var m=V.radialLine().context(l);V.range(0,2*Math.PI,2*x/n.length).forEach(function(t,e){var a=V.scaleLinear().domain([0,1]).range([r,350]),i=[2*x/n.length*e,a(0)],o=[2*x/n.length*e,a(1)];m([i,o])}),l.stroke(),l.restore(),l.save(),l.strokeStyle="#00ab84",l.lineWidth=2,l.fillStyle="#00ab84";var b=V.symbol().size(20).context(l);l.beginPath(),v.forEach(function(t,e){l.save(),l.translate(t[1]*Math.sin(t[0]),-t[1]*Math.cos(t[0])),b(),l.restore()}),l.stroke(),l.fill(),l.restore(),l.save(),l.strokeStyle="salmon",l.lineWidth=4,l.textAlign="center",l.fillStyle="#00ab84",l.beginPath(),l.font="16px adad",n.forEach(function(t,e){l.save(),l.rotate(2*x/n.length*e),g(l,t,-390,!1),g(l,a.data[t].en,-370,!0),l.restore()}),l.restore()}function p(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["seagreen","steelblue"],a=arguments[2]||at,r=a.map(function(t,e){return{x:-t.x,y:t.y}}),n=et.line().x(function(t){return t.x}).y(function(t){return t.y}).curve(et.curveCatmullRom.alpha(1)).context(t);t.save(),t.lineWidth=2,t.strokeStyle=e[0],t.beginPath(),n(a),t.stroke(),t.restore(),t.save(),t.lineWidth=2,t.strokeStyle=e[1],t.beginPath(),n(r),t.stroke(),t.restore(),t.save(),t.strokeStyle=e[1],t.fillStyle="#fff",t.beginPath(),n([].concat(tt(a),[{x:0,y:-200}])),t.fill(),t.restore(),t.save(),t.strokeStyle=e[1],t.fillStyle="#fff",t.beginPath(),n([].concat(tt(r),[{x:-50,y:-190}])),t.fill(),t.restore()}function x(t){function e(){t.save(),t.lineWidth=2,t.strokeStyle=r[0],t.beginPath(),l(i),t.stroke(),t.restore()}function a(){t.save(),t.lineWidth=2,t.strokeStyle=r[1],t.beginPath(),l(o),t.stroke(),t.restore()}var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["seagreen","steelblue"],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["left","right"],i=arguments[3]||at,o=i.map(function(t,e){return{x:-t.x,y:t.y}}),l=et.line().x(function(t){return t.x}).y(function(t){return t.y}).curve(et.curveCatmullRom.alpha(1)).context(t);2===n.length&&e()&&a(),1===n.length&&("left"==n[0]?e():a()),t.save(),t.strokeStyle=r[1],t.fillStyle="#fff",t.beginPath(),l([].concat(tt(i),[{x:0,y:-200}])),t.fill(),t.restore(),t.save(),t.strokeStyle=r[1],t.fillStyle="#fff",t.beginPath(),l([].concat(tt(o),[{x:0,y:-200}])),t.fill(),t.restore()}function y(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[rt,nt],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"seagreen",r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return function(){var n=et.radialLine().curve(et.curveCatmullRom.alpha(.7)).context(t),i=e[0],o=e[1],l=void 0;l=r?[(i[0]+o[0])/2,252]:[(0+o[0])/2,252],e.splice(1,0,l),t.save(),t.strokeStyle=a,t.fillStyle="#fff",t.beginPath(),n(e),t.fill(),t.stroke(),t.restore()}()}function m(t,e){function a(t,e,a){l.save(),l.translate(a*f*Math.cos(t)+Math.sqrt(e*e-f*f)*Math.sin(t),a*f*Math.sin(t)-Math.sqrt(e*e-f*f)*Math.cos(t)),d.outerRadius(f-1.5)(),l.restore()}var r=e||X,n=Object.values(r.data),i=n[1]/n[0];if(!t.querySelector("canvas")){var o=document.createElement("canvas");t.appendChild(o)}var l=o.getContext("2d");o.width=1e3,o.height=800;var s=o.width,c=o.height;Math.min(s,c);l.translate(s/2,c/2),l.save();var u=[{data:n[0],endAngle:2*Math.PI,startAngle:2*Math.PI*(n[1]/(n[0]+n[1])),index:0,value:n[0]},{data:n[1],startAngle:0,endAngle:2*Math.PI*(n[1]/(n[0]+n[1])),index:1,value:n[1]}];l.save(),l.setLineDash([4,0]),l.globalAlpha=.7;var d=it.arc().startAngle(0).endAngle(2*Math.PI).innerRadius(0).context(l);[325,350].forEach(function(t,e){l.lineWidth=0===e?2:10,1===e&&l.setLineDash([4,0]);var a=it.arc().innerRadius(t).outerRadius(t).padAngle(.02).context(l);u.forEach(function(t,r){0===e&&l.setLineDash([5,10]),l.save(),l.strokeStyle=0===r?"seagreen":"steelblue",l.beginPath(),a(t),l.stroke(),l.restore()})}),l.restore(),l.save();var f=8;l.lineWidth=15,l.fillStyle="#fff",u.forEach(function(t,e){l.beginPath(),l.strokeStyle=1===e?"seagreen":"steelblue",a(t.endAngle+.025,350,-1),l.stroke(),l.fill()}),l.restore(),l.save();var h=it.arc().innerRadius(0).context(l);u.forEach(function(t,e){l.beginPath(),l.strokeStyle=0===e?"seagreen":"steelblue",h.outerRadius(250)(t),l.stroke()}),l.restore();var g=[[2*Math.PI,310],[u[0].startAngle,310]];i<1/6?(l.save(),l.beginPath(),x(l,["seagreen","steelblue"],["left"]),l.restore(),l.save(),l.rotate(u[1].endAngle),x(l,["steelblue","seagreen"],["right"]),l.restore(),y(l,g,"steelblue",!1)):i>6?(l.save(),l.beginPath(),x(l,["seagreen","steelblue"],["right"]),l.restore(),l.save(),l.rotate(u[1].endAngle),x(l,["steelblue","seagreen"],["left"]),l.restore(),y(l,g,"seagreen",!0)):(l.save(),l.beginPath(),p(l,["seagreen","steelblue"]),l.restore(),l.save(),l.rotate(u[1].endAngle),p(l,["steelblue","seagreen"]),l.restore()),l.save(),l.strokeStyle="#2aa198",l.lineWidth=2;var v=[[u[0].startAngle,310],[u[1].startAngle,310]],m=u[0].startAngle-Math.PI,b=function(t,e,a){var r=[];return r.push([t/2+Math.PI/2,0]),[].concat(tt(Array(e))).map(function(n,i){r.push([t/2+Math.PI/2,a*(i+1)/e]),r.push([t/2+Math.PI/2,-a*(i+1)/e])}),r}(m,25,250),k=Math.acos(250/310),A=2*Math.PI-Math.acos(250/310),q=Math.PI-(k-m),w=m+k+Math.PI,S=[[u[0].endAngle,310],[0,0],[u[1].endAngle,310]],P=it.radialLine().curve(it.curveLinear).context(l),L=it.radialLine().curve(it.curveCatmullRom.alpha(.5)).context(l);it.line().curve(it.curveLinear).context(l);l.beginPath(),P(S),l.stroke(),l.save(),b.forEach(function(t,e){l.strokeStyle=t[1]>0?"steelblue":"seagreen",l.globalAlpha=.3,l.beginPath(),P([0,100],[0,0],[0,200]);var a=250*Math.abs(e-25)/25;t[1]>160||t[1]<-190?L(t[1]>0?[v[1],[k,a],t,[q,a],v[0]]:[v[0],[w,a],t,[A,a],v[1]]):P([v[0],t,v[1]])}),l.restore(),l.save(),l.textBaseline="middle",l.textAlign="center",l.globalAlpha=.4,l.fillStyle="black",l.font="144px adad",r.text?l.fillText(r.text,0,0):l.fillText(n[0]+":"+n[1],0,0),l.restore()}function b(t,e){function a(t){t.call(g),t.select(".domain").remove(),t.selectAll(".tick:not(:first-of-type) line").attr("stroke","#fff"),t.selectAll(".tick text").attr("x",-24).attr("dy",4)}function r(t){t.call(v),t.select(".domain").remove(),t.selectAll(".tick:not(:first-of-type) line").attr("stroke","#ccc"),t.selectAll(".tick:nth-child(3) line").attr("stroke","seagreen").attr("stroke-width","3").attr("opacity","0.6"),t.selectAll(".tick:nth-child(3) text").style("font-family","adad").style("font-size","20px").style("fill","seagreen"),t.selectAll(".tick text").attr("x",4).attr("dy",24)}var n=e||Y,i=Object.keys(n.data),o=Object.values(n.data),l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttribute("width","1000"),l.setAttribute("height","500"),t.append(l);var s={top:20,right:40,bottom:50,left:200},c=+(l=it.select("svg")).attr("width")-s.left-s.right,u=+l.attr("height")-s.top-s.bottom,d=l.append("g").attr("transform","translate("+s.left+","+s.top+")"),f=(it.format(".2f"),it.scaleLinear().domain([0,5]).range([u,0])),h=it.scaleLinear().domain([0,4.3]).range([0,c]),g=it.axisLeft(f).ticks(5).tickSize(-c).tickFormat(function(t){return i[t-1]}),v=it.axisBottom(h).ticks(4).tickSize(-u).tickFormat(function(t,e){return 2===e?"æ ‡å‡†å€¼":25*t});d.append("g").attr("class","axis axis--x").call(a),d.append("g").attr("class","axis axis--y").attr("transform","translate(0,"+u+")").call(r);var p=d.selectAll("g.bar").data(o).enter().append("g").attr("class","bar").attr("transform",function(t,e){return"translate(0,"+(f(e+1)-13)+")"});it.line().defined(function(t){return t}).x(function(t){return t[0]}).y(function(t){return t[1]}).curve(it.curveLinear),it.line().defined(function(t){return t}).x(function(t){return t[1]}).y(function(t){return t[0]}).curve(it.curveLinear),p.append("rect").attr("width",function(t){return h(4*t)+13}).attr("stroke-width","3").attr("rx",13).attr("ry",13).attr("transform","translate(-13,0)").attr("stroke","steelblue").attr("height",26);p.attr("clip-path",function(t,e){return"url(#clip-"+e+")"});p.append("clipPath").attr("id",function(t,e){return"clip-"+e}).append("rect").attr("width","1000").attr("transform","translate(0,-5)").attr("height","40");p.append("text").attr("class","value").attr("x",function(t){return h(4*t)}).attr("y",13).attr("dx",14).attr("dy",7.8).style("fill","#000").style("font-size","26px").style("font-family","adad").attr("text-anchor","start").text(function(t){return it.format(".2%")(t)})}function k(t,e){var a=[];return t.forEach(function(r,n){if(n!==t.length-1){var i=r,o=t[n+1],l=1-e,s={x:i.x,y:i.y*l+o.y*e},c={x:o.x,y:o.y*l+i.y*e};a.push([i,s,c,o])}}),a}function A(t,e){function r(t){t.call(M),t.select(".domain").remove(),t.selectAll(".tick").remove(),t.selectAll(".tick text").attr("x",0).attr("dy",-4),t.selectAll(".tick:nth-child(4n+1) text").style("font-family","adad").style("font-size","20px").style("fill","#cb8d88"),t.selectAll(".tick:nth-child(2n) text").style("font-family","adad").style("font-size","20px").style("fill","#e4be6f"),t.selectAll(".tick:nth-child(3) text").style("font-family","adad").style("font-size","20px").style("fill","#00ab84"),t.selectAll(".tick:nth-child(4n+1) line").attr("stroke","#cb8d88").attr("stroke-width","3"),t.selectAll(".tick:nth-child(2n) line").attr("stroke-width","2").attr("stroke","#e4be6f"),t.selectAll(".tick:nth-child(3) line").attr("stroke-width","3").attr("stroke","#00ab84");var e=["#cb8d88","#e4be6f","#00ab84","#e4be6f","#cb8d88"],a=Object.keys(h.standard).slice(1,6),r=[-20,-10,0,10,20];e.map(function(e,i){var o=[];x[i].map(function(t,e){o.push({x:S(t),y:e})}),o.unshift({x:S(r[i]),y:-1}),o.push({x:S(r[i]),y:16}),n(t,k(o,.25),e,a[i],r[i])})}function n(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"seagreen",r=arguments[3],n=arguments[4],i=t.append("g").attr("class","gStandard");i.selectAll(".generalStandardLine").data(e).enter().append("path").attr("class","generalStandardLine").style("stroke",d(u(a),.5)).attr("stroke-width",2).attr("fill","none").attr("d",P),i.append("text").attr("fill",a).attr("x",E(n)).attr("y",-50).attr("dy",-4).attr("font-family","adad").attr("font-size","20px").style("fill",a).text(r),i.append("text").attr("fill",a).attr("x",E(n)).attr("y",1450).attr("dy",24).attr("font-family","adad").attr("font-size","20px").style("fill",a).text(r)}function i(t){t.call(O),t.select(".domain").remove(),t.selectAll(".tick text").remove(),t.selectAll(".tick line").attr("stroke","#00ab84").attr("stroke-width","3").attr("opacity","0.6"),t.selectAll(".tick:not(:first-of-type) line").attr("stroke","#00ab84"),t.selectAll(".tick:nth-child(1) line").attr("stroke","#00ab84").attr("stroke-width","1").attr("opacity","0.6"),t.selectAll(".tick:last-child line").attr("stroke","#00ab84").attr("stroke-width","1").attr("opacity","0.6")}function o(t,e){for(var a in t)t[a].constructor===Array?o(t[a],e):t[a].constructor===Object?o(t[a],e):t[a].constructor===Number&&"x"===a&&(t[a]=(t[a]-.5)*e+.5);return t}function c(t,e){for(var a in t)t[a].constructor===Array?c(t[a],e):t[a].constructor===Object?c(t[a],e):t[a].constructor===Number&&"x"===a&&(t[a]=e-t[a]);return t}function f(t,e,a){t.append("g").selectAll(e).data(a).enter().append("path").attr("class",e).attr("opacity",.15).attr("stroke",function(t){return"left"===e?"salmon":"seagreen"}).attr("stroke-width",1).attr("fill","none").attr("d",P)}var h=e||ot,g=Object.keys(h.standard),v=Object.keys(h.data),p=Object.values(h.data),x=Object.values(h.standard).slice(1,6),y=s(t),m=l(t,"svg-"+t.id);m.setAttribute("width","500"),m.setAttribute("height","1700");var b={top:150,right:40,bottom:150,left:200},A=+(m=st.select("#"+t.id+" svg")).attr("width")-b.left-b.right,q=+m.attr("height")-b.top-b.bottom,w=m.append("g").attr("transform","translate("+b.left+","+b.top+")"),S=(st.format(".2f"),m.append("defs").append("filter").attr("id","blur").append("feGaussianBlur").attr("stdDeviation",1),st.scaleLinear().domain([-25,25]).range([.5,5.5])),P=st.line().defined(function(t){return t}).x(function(t){return L(t.x)}).y(function(t){return R(t.y)}).curve(st.curveBasis),L=st.scaleLinear().domain([.5,5.5]).range([0,A]),R=st.scaleLinear().domain([-.5,15.5]).range([0,q]),M=st.axisTop(L).ticks(5).tickSize(-q).tickFormat(function(t,e){return g[t]}),O=st.axisLeft(R).ticks(15).tickSize(-A).tickFormat(function(t,e){return v[e]}),E=st.scaleLinear().domain([-25,25]).range([0,260]);w.append("g").attr("class","axis axis--x").call(r),w.append("g").attr("class","axis axis--y").call(i);var j=[];p.map(function(t,e){j.push({x:S(t),y:e})}),j.unshift({x:S(p[0]),y:-1}),j.push({x:S(p[15]),y:16});var z=k(j,.25);w.selectAll(".line").data(z).enter().append("path").attr("class","line").style("stroke","#00ab84").attr("stroke-width",3).attr("fill","none").attr("d",P),st.range(0,1,.04).forEach(function(t,e){var a=k(c(o(c(JSON.parse(JSON.stringify(j)),6),t),6),.25),r=k(o(JSON.parse(JSON.stringify(j)),t),.25);f(w,"left",r),f(w,"right",a)}),console.log(a);var B=document.querySelector("#"+t.id+" svg");a(y,document.querySelector("#"+t.id+" svg").outerHTML),t.removeChild(B)}function q(t,e){var r=e||lt,n={top:20,right:100,bottom:20,left:100},i=function(t){return h(t)+" TWh"},o=(st.scaleOrdinal(st.schemeCategory20),s(t)),c=l(t,"svg-"+t.id);c.setAttribute("width","800"),c.setAttribute("height","1500");var u=+(c=st.select("#"+t.id+" svg")).attr("width")-n.left-n.right-100,d=+c.attr("height")-n.top-n.bottom,f=c.append("g").attr("transform","translate("+n.left+","+n.top+")"),h=st.format(".2f"),g=st.sankey().nodeWidth(3).nodePadding(40).size([u,d]),v=g.link();g.nodes(r.nodes).links(r.links).layout(1e3);var p=st.scaleLinear().domain([0,15]).range([0,1264]),x=st.scaleLinear().domain([0,9]).range([332,932]);f.append("g").selectAll(".node").data(r.nodes).enter().append("g").attr("class","node").attr("transform",function(t,e){if(0===t.x)return"translate("+t.x+","+(t.y=p(e))+")";return"translate("+t.x+","+(t.y=x(e-16)+0)+")"}).append("rect").attr("height",function(t,e){return t.dy}).attr("width",g.nodeWidth()).style("fill",function(t){return t.color||"#b5d8e1"}).append("title").text(function(t){return t.name+"\n"+i(t.value)}),f.append("g").selectAll(".link").data(r.links).enter().append("path").attr("stroke-opacity",.2).attr("fill","none").attr("d",v).attr("stroke-width",function(t,e){return t.strokeWidth}).attr("stroke",function(t){return t.color||"salmon"}).sort(function(t,e){return e.dy-t.dy}).append("title").text(function(t){return t.source.name+" â†’ "+t.target.name+"\n"+i(t.value)});var y=document.querySelector("#"+t.id+" svg");o.getContext("2d");a(o,document.querySelector("#"+t.id+" svg").outerHTML),t.removeChild(y)}function w(t,e){function a(t){return t<50?"#00ab84":t>75?"#cb8d88":"#e4be6f"}function r(t){return p(t)}var n=e||ct,i=Object.keys(n.data),o=Object.values(n.data).map(function(t,e){return t.value});if(null===t.querySelector("canvas")){var l=document.createElement("canvas");t.appendChild(l)}var s=l.getContext("2d");l.width=1100,l.height=900;var c=l.width,f=l.height;Math.min(c,f);window.devicePixelRatio&&(l.style.width=c+"px",l.style.height=f+"px",l.height=f*window.devicePixelRatio*2,l.width=c*window.devicePixelRatio*2,s.scale(2*window.devicePixelRatio,2*window.devicePixelRatio)),s.translate(c/2+1,f/2),s.save(),s.textBaseline="hanging",s.textAlign="center",s.fillStyle="#00ab84",s.font="24px adad",s.fillText(n.text,0,-10),s.restore(),s.save(),s.strokeStyle="#00ab84",s.setLineDash([4,5]),ut.range(110,380,20).forEach(function(t,e){var a=ut.arc().outerRadius(t).innerRadius(0).startAngle(0).endAngle(2*Math.PI).context(s);s.beginPath(),a(),s.stroke()}),s.restore(),s.save(),s.strokeStyle="#00ab84",s.globalAlpha=.7,s.setLineDash([4,0]),s.beginPath(),ut.arc().outerRadius(100).innerRadius(0).startAngle(0).endAngle(2*Math.PI).context(s)(),s.stroke(),s.restore(),s.save();var h=ut.pie()(Array.from({length:16},function(t){return 1}));h.sort(function(t,e){return t.startAngle-e.startAngle});var v=ut.arc().context(s),p=ut.scaleLinear().domain([0,100]).range([110,360]);h.forEach(function(t,e){s.fillStyle="rgba(255,255,255,1)";var n=r(o[e]);ut.range(110,n,6).sort(function(t,e){return e-t}).map(function(r,n,i){s.save(),s.beginPath(),s.setLineDash([10,0]);var l=a(o[e]);s.strokeStyle=0===n?d(u(l),1):d(u(l),.5),0===n?(s.lineWidth=2,v.outerRadius(r).innerRadius(110)(t)):(s.lineWidth=1,v.outerRadius(r).innerRadius(r)(t)),s.stroke(),0===n&&s.fill(),s.restore()})}),s.restore(),s.save(),s.strokeStyle="#cb8d88",s.lineWidth=4,s.fillStyle="#00ab84",s.beginPath(),s.font="16px adad",i.forEach(function(t,e){s.save(),s.rotate(2*Math.PI/i.length*e+Math.PI/i.length-.02),g(s,t,-410,!1),g(s,n.data[t].en,-390,!0),s.restore()}),s.restore()}function S(t,e){function a(t){t.call(m),t.selectAll(".tick text").attr("x",4).attr("dy",24)}function n(t){t.call(y),t.selectAll(".domain").remove(),t.selectAll(".tick line").attr("stroke-width",2),t.selectAll(".tick text").attr("x",-24).attr("dy",4),t.selectAll(".tick line").attr("stroke","#ccc"),t.select(".tick:last-child line").attr("stroke-width",6)}function i(t){var e=v.append("g").attr("class","lengend");e.append("rect").attr("x",t.x).attr("y",t.y-70).attr("width",30).style("font-family","adad").attr("height",30).attr("alignment-baseline","baseline").attr("fill",t.color),e.append("text").attr("x",t.x+30+10).attr("y",t.y+30-7-70).attr("alignment-baseline","baseline").style("font-family","adad").style("font-size","24px").text(t.text)}var o=e||dt,c=o.normal,u=o.data;if(u.bileAcid+u.cholesterol>10)throw new Error("sum cannot > 10");l(t);s(t);var d=ft.select("#"+t.id+" svg"),f={top:80,right:60,bottom:150,left:130};d.attr("width",1e3).attr("height",800);var h=d.attr("width")-f.left-f.right,g=d.attr("height")-f.top-f.bottom,v=d.append("g").attr("transform","translate("+f.left+","+f.top+")");r(d,100,900,"#66c9b2"),r(d,100,900,"#f0938f");var p=ft.scaleLinear().domain([0,2]).range([0,h]),x=ft.scaleLinear().domain([0,10]).range([0,g]),y=ft.axisLeft(x).ticks(10).tickSize(-h).tickFormat(function(t){}),m=ft.axisBottom(p).ticks(11).tickSize(4).tickFormat(function(t,e){});v.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+g+")").call(a),v.append("g").attr("class","axis axis--y").attr("transform","translate(0,0)").call(n),v.append("line").attr("class","normLine").attr("stroke-width",6).attr("x1",0).attr("y1",function(){return x(10-c)}).attr("x2",810).attr("y2",function(){return x(10-c)}).attr("stroke-dasharray","20,8").attr("stroke","orange").attr("transform",function(){});v.append("rect").attr("class","bar").attr("fill","url(#hpattern-#f0938f)").attr("stroke-width",8).attr("stroke","#f0938f").attr("width",300).attr("height",x(u.cholesterol)).attr("transform",function(){return"translate("+(p(1)-150)+","+x(10-u.cholesterol-u.bileAcid)+")"}),v.append("rect").attr("class","bar").attr("fill","url(#hpattern-#66c9b2)").attr("stroke-width",8).attr("stroke","#66c9b2").attr("width",300).attr("height",x(u.bileAcid)).attr("transform",function(){return"translate("+(p(1)-150)+","+x(10-u.bileAcid)+")"}),v.append("line").attr("class","axisBottom").attr("stroke-width",8).attr("x1",0).attr("y1",function(){return 571}).attr("x2",811).attr("y2",function(){return 571}).attr("stroke","#ccc").attr("transform",function(){});var b={x:600,y:22,color:"#f0938f",text:"èƒ†å›ºé†‡"};i({x:100,y:22,color:"#66c9b2",text:"èƒ†æ±é…¸"}),i(b);document.querySelector("#"+t.id+" svg")}function P(t,e){function a(t){t.call(m),t.selectAll(".tick text").attr("font-family","adad").attr("x",4).attr("dy",24).attr("font-size",function(){return o.axisFontSize?o.axisFontSize:22})}function r(t){t.call(y),t.selectAll(".tick text").attr("font-family","adad").attr("x",-24).attr("dy",4).attr("font-size",function(){return o.axisFontSize?o.axisFontSize:22})}function n(t,e,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=arguments[5],l=a.append("g").attr("transform","translate("+(30+p(e.value)+0)+",0)"),s="#cb8d88";e.value<o.gap[0]&&(s=gt[0])||e.value<o.gap[1]&&(s=gt[1])||e.value<o.gap[2]&&(s=gt[2])||e.value<o.gap[3]&&(s=gt[3])||e.value<o.gap[4]&&(s=gt[4]),l.append("rect").attr("x",0).attr("y",0-r).attr("width",3).attr("height",600+r).attr("fill",function(){return i||s}),l.append("text").attr("text-anchor",function(){return n?"start":"end"}).attr("x",function(){return n?4:-4}).attr("y",0-r).attr("font-family","adad").attr("font-size",24).style("fill",function(){return i||s}).text(e.text.cn)}var o=e||ht,c=l(t),u=(s(t),{top:100,right:60,bottom:150,left:130});(c=vt.select("#"+t.id+" svg")).attr("width",1e3).attr("height",800);var d=c.attr("width")-u.left-u.right,f=c.attr("height")-u.top-u.bottom,h=c.append("g").attr("transform","translate("+u.left+","+u.top+")"),g=vt.format(".2%");i(c,4,27,"#cb8d88"),i(c,4,27,"#e4be6f"),i(c,4,27,"#00ab84");var v=o.data.map(function(t,e){return t.y}),p=vt.scaleLinear().domain([vt.min(o.data.map(function(t,e){return t.x[0]})),vt.max(o.data.map(function(t,e){return t.x[1]}))]).range([0,d]),x=vt.scaleLinear().domain([0,vt.max(v)]).range([f,0]),y=vt.axisLeft(x).ticks(4).tickSize(4).tickFormat(function(t){return g(t)}),m=vt.axisBottom(p).ticks(5).tickSize(4).tickFormat(function(t,e){return t});h.append("g").attr("class","axis axis--x").attr("transform","translate(30,"+(f+110)+")").call(a),h.append("g").attr("class","axis axis--y").attr("transform","translate(0,50)").call(r),h.selectAll(".bar").data(o.data).enter().append("g").attr("class","bar").attr("transform",function(t){return"translate("+(p(t.x[0])-70)+","+(x(t.y)+50)+")"}).append("rect").attr("x",100).attr("fill",function(t,e){var a="#cb8d88";return t.x[0]<o.gap[0]&&(a="#cb8d88")||t.x[0]<o.gap[1]&&(a="#e4be6f")||t.x[0]<o.gap[2]&&(a="#00ab84")||t.x[0]<o.gap[3]&&(a="#e4be6f"),"url(#vpattern-"+a+")"}).attr("width",p(o.data[0].x[1])-p(o.data[0].x[0])-4).attr("height",function(t){return f-x(t.y)});var b=o.data.map(function(t,e){return{x:(t.x[1]+t.x[0])/2,y:t.y}}),k=vt.line().defined(function(t){return t}).x(function(t){return p(t.x)}).y(function(t){return x(t.y)}).curve(vt.curveBasis);h.append("path").datum(b).attr("transform","translate(30,50)").attr("class","line").attr("fill","none").attr("stroke-width",2).attr("d",k);var A=[[o.data[0].x[0],o.gap[0]],[o.gap[0],o.gap[1]],[o.gap[1],o.gap[2]],[o.gap[2],o.gap[3]],[o.gap[3],o.data[o.data.length-1].x[1]]],q=p(o.data[0].x[1])-p(o.data[0].x[0]);h.selectAll("rect.bottomRect").data(A).enter().append("rect").attr("transform","translate("+(30+q/2)+",0)").attr("x",function(t,e){return p(t[0])}).attr("y",function(t,e){return 620}).attr("width",function(t,e){return p(t[1])-p(t[0])}).attr("height",20).attr("fill",function(t,e){var a="#cb8d88";return 0===e&&(a="#cb8d88"),1===e&&(a="#e4be6f"),2===e&&(a="#00ab84"),3===e&&(a="#e4be6f"),a}),n("average",o.average,h,40,!0,"steelblue"),p(o.indicator.value)-p(o.average.value)<0?n("indicator",o.indicator,h,0,!1):n("indicator",o.indicator,h,0,!0);document.querySelector("#"+t.id+" svg")}function L(t,e){var a=e||xt;a=a.map(function(t,e){return j(t)});var r=bt.map(function(t,e){return 4===e?1-a[e-1]:0===e?a[e]:a[e]-a[e-1]});a=a.map(function(t,e){return 400*t}),r=r.map(function(t,e){return 400*t});var n=s(t),i=n.getContext("2d");n.width=50,n.height=400;n.width,n.height;i.save(),i.save(),M(i,0,a,r),M(i,1,a,r),M(i,4,a,r),M(i,3,a,r),M(i,2,a,r),i.restore()}function R(t,e){var a=e||pt;L(t,a=[0,0].concat(tt(a)))}function M(t,e,a,r){t.save(),t.beginPath(),t.translate(0,[0].concat(tt(a))[e]),O(t,bt[e],r[e]),t.restore()}function O(t,e,a){kt.range(5,50,5).map(function(r,n){E(t,e,r,0,5,a)})}function E(t,e,a,r,n,i){t.save(),t.strokeStyle=e,t.lineWidth=2,t.beginPath(),t.strokeRect(a,r,n,i),t.restore()}function j(t){return 0===t?0:.96*t+.02}function z(t,e){var r=e||yt,n=r.data.map(function(t,e){return 70*t});l(t);var i=s(t),c=kt.select("#"+t.id+" svg"),u={top:10,right:10,bottom:10,left:10};c.attr("width",r.width),c.attr("height",r.height);var d=c.attr("width")-u.left-u.right,f=c.attr("height")-u.top-u.bottom,h=c.append("g").attr("transform","translate("+u.left+","+u.top+")");kt.format(".2%");o(c,n,t.id,70,r.width),h.append("rect").attr("x",0).attr("y",0).attr("width",d).attr("height",f).attr("stroke-width",4).attr("stroke","#ccc").attr("rx",r.height/2).attr("ry",r.height/2).attr("fill","url(#vpattern-vLineRect5-"+t.id+")"),a(i,document.querySelector("#"+t.id+" svg").outerHTML)}function B(t,e){var a=e||mt;z(t,{width:a.width,height:a.height,data:[0,0].concat(tt(a.data))})}function F(t){this.type="SQL",this.data=t}function C(t){return new F(t)}function W(){this.type="EstimateAntibiotics"}function I(t,e){function a(t,e){return C(o[!0===e?"top":"bottom"]).Query("@x=="+t)[0]}function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steelblue",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1.3,s=100,v="left"===r?1:-1,p="top"===e?0:1,x=("top"===e?f:h).attr("clip-path","url(#clip-"+p+")").append("g").attr("class","pathContainer");x.selectAll(".basicCurve").data(t).enter().append("path").attr("d",function(t,e){return 0===p?"M0 "+(c.top+t.offset)+"L "+(u-s)*v+" "+(c.top+t.offset)+"A "+(s-t.offset)+" "+(s-t.offset)+" 0 0 "+(1===v?1:0)+(u-t.offset)*v+" "+(c.top+s)+"\n                         L "+(u-t.offset)*v+" "+d:"M0 "+(c.top-t.offset)+"L "+(u-s)*v+" "+(c.top-t.offset)+"A "+(s-t.offset)+" "+(s-t.offset)+" 0 0 "+(1===v?0:1)+(u-t.offset)*v+" "+(c.top-s)+"\n                         L "+(u-t.offset)*v+" "+(d-2e3)}).style("stroke",n).style("stroke-opacity",.5).attr("class","basicCurve").attr("stroke-width",function(t){return t.strokeWidth}).attr("fill","none");var y="top"===e;a(i,y).tag,a(i,y).data;if("left"===r&&"top"===e)x.attr("transform","translate("+(-u/2+20+i*(31*l)-100+100)+","+(g-140-50*o)+")");else if("right"===r&&"top"===e)x.attr("transform","translate("+(u+u/2-20+i*(31*l)-97+100)+","+(g-140-50*o)+")");else if("left"===r&&"bottom"===e){var m=-u/2+20+i*(31*l)-100+100,b=g-390+50*o+360;x.attr("transform","translate("+m+","+b+")")}else if("right"===r&&"bottom"===e){var k=u+u/2-20+i*(31*l)-97+100,A=g-390+50*o+360;x.attr("transform","translate("+k+","+A+")")}return x}function i(t,e,a,n,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1.3;return r([{offset:1,strokeWidth:o},{offset:3*o+1,strokeWidth:o},{offset:6*o+1,strokeWidth:o},{offset:9*o+1,strokeWidth:o},{offset:12*o+1,strokeWidth:o},{offset:15*o+1,strokeWidth:o},{offset:18*o+1,strokeWidth:o},{offset:21*o+1,strokeWidth:o},{offset:24*o+1,strokeWidth:o},{offset:27*o+1,strokeWidth:o}],t,e,a,n,i)}var o=e||At;l(t,"Antibiotics");var s=jt.select("#"+t.id+" svg"),c={top:50,right:600,bottom:50,left:630};s.attr("width",2700).attr("height",1200);var u=s.attr("width")-c.left-c.right,d=s.attr("height")-c.top-c.bottom,f=s.append("g").attr("class","gTop").attr("transform","translate("+c.left+","+c.top+")"),h=s.append("g").attr("class","gBottom").attr("transform","translate("+c.left+","+c.top+")");n(s,[75,90]);var g=578;o.top.map(function(t,e){i("top",t.direction,t.color,t.x,t.y)}),o.bottom.map(function(t,e){i("bottom",t.direction,t.color,t.x,t.y)});s.selectAll(".clippath").data([1,2]).enter().append("clipPath").attr("id",function(t,e){return"clip-"+e}).append("rect").attr("width","1420").attr("class","clippath").attr("transform",function(t,e){return"translate(0,"+(540*e-20)+")"}).attr("height",g),o.gap[0],o.gap[1],o.gap[2];!function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[13,2,0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.3,a=["#00ab84","#e4be6f","#cb8d88"];t.map(function(t,e){0===t&&a.slice(e,1)}),s.selectAll(".centralRect").data(t).enter().append("rect").attr("class","centralRect").attr("x",function(a,r){return 0===r?1065:1===r?1065+t[r-1]*(31*e):2===r?1065+(15-t[r])*(31*e):void 0}).attr("y",570).attr("width",function(t,a){var r=t*(31*e)-3;return r>0?r:0}).attr("height",40).attr("fill-opacity",.5).attr("fill",function(t,e){return a[e]}),s.append("rect").attr("width",800).attr("x",1e3).attr("y",566).attr("height",4).attr("fill","#fff"),s.append("rect").attr("width",800).attr("x",1e3).attr("y",610).attr("height",4).attr("fill","#fff")}(o.gap);document.querySelector("#"+t.id+" svg")}function D(t){}function T(t){}function N(t){}function G(t){}e="default"in e?e.default:e,a="default"in a?a.default:a;var J=["#cb8d88","#e4be6f","#00ab84","#e4be6f","#cb8d88"],Q=Object.assign({},e,require("d3-shape"),require("d3-format"),require("d3-array"),require("d3-sankey"),require("d3-selection"),require("d3-request"),require("d3-axis"),require("d3-color"),require("d3-scale")),$={type:"æ£€æµ‹å€¼",data:{"è†³é£Ÿçº¤ç»´":{value:5,en:"Dietary fiber"},"ä½èšæœç³–":{en:"Fructo-oligosaccharide",value:6.5},"ä½èšå¼‚éº¦èŠ½ç³–":{en:"Isomalto-oligosaccharide",value:4},"ÃŸ-è‘¡è„ç³–":{value:2.5,en:"ğœ·-glucan"},"è‘¡ç”˜éœ²èšç³–":{value:4,en:"Glucomammam"},"æŠ—æ€§éº¦èŠ½ç³Šç²¾":{value:5.4,en:"Resistant malyodextrins"}},cnFontSize:18,enFontSize:12},H={type:"æ ‡å‡†å€¼",data:{"è†³é£Ÿçº¤ç»´":{value:3.5,en:"Dietary fiber"},"ä½èšæœç³–":{en:"Fructo-oligosaccharide",value:2.2},"ä½èšå¼‚éº¦èŠ½ç³–":{en:"Isomalto-oligosaccharide",value:3.2},"ÃŸ-è‘¡è„ç³–":{value:6.2,en:"ğœ·-glucan"},"è‘¡ç”˜éœ²èšç³–":{value:2.7,en:"Glucomammam"},"æŠ—æ€§éº¦èŠ½ç³Šç²¾":{value:5.2,en:"Resistant malyodextrins"}},cnFontSize:18,enFontSize:12},_=Object.assign({},e,require("d3-shape"),require("d3-format"),require("d3-selection"),require("d3-request"),require("d3-axis"),require("d3-array"),require("d3-drag"),require("d3-color"),require("d3-scale")),K={text:"adad",data:{"å“’å“’å“’":{value:.08,color:"seagreen"},"èƒ†å›ºé†‡":{value:.17,color:"steelblue"},"é¥±å’Œè„‚è‚ªé…¸":{value:.2,color:"salmon"},"ä¸é¥±å’Œè„‚è‚ªé…¸":{value:.1,color:"steelblue"},"è°è°è„‚è‚ªé…¸":{value:.05,color:"steelblue"},"é˜è„‚ç±»":{value:.4,color:"steelblue"}}},Z=Object.assign({},e,require("d3-array"),require("d3-shape"),require("d3-format"),require("d3-request"),require("d3-drag"),require("d3-color"),require("d3-scale")),U={score:46.7,data:{"ä½èšæœç³–":{value:.4,en:"Fructo-oligosaccharide"},"ä½èšå¼‚éº¦èŠ½ç³–":{value:.6,en:"Isomalto-oligosaccharide"},"ğœ·-è‘¡èšç³–":{value:.3,en:"ğœ·-glucan"},"è‘¡ç”˜éœ²èšç³–":{value:.2,en:"Glucomammam"},"æŠ—æ€§éº¦èŠ½ç³Šç²¾":{value:.9,en:"Resistant malyodextrins"},"æ°¨ç³–":{value:.5,en:"Glucosamine"},"é¥±å’Œè„‚è‚ªé…¸":{value:.3,en:"Saturated fat"},"ä¸é¥±å’Œè„‚è‚ªé…¸":{value:.8,en:"Unsaturated fat"},"é˜è„‚ç±»":{value:.77,en:"Sphingolipid"},"èƒ†æ±é…¸":{value:.12,en:"Bile acid"},"èƒ†çº¢ç´ ":{value:.34,en:"Bilirubin"},"èƒ†å›ºé†‡":{value:.96,en:"Cholestreol"},"æ·€ç²‰":{value:.43,en:"Starch"},"è†³é£Ÿçº¤ç»´":{value:.213,en:"Dietary fiber"}}},V=Object.assign({},e,require("d3-format"),require("d3-request"),require("d3-array"),require("d3-drag"),require("d3-color"),require("d3-shape"),require("d3-scale")),X={sature:42,unsature:58,text:"adad"},Y={standard:.5,data:{"é¥±å’Œè„‚è‚ªé…¸":.8739,"ä¸é¥±å’Œè„‚è‚ªé…¸":.1498,"é˜è„‚ç±»":.3483,"èƒ†å›ºé†‡":.5705}},tt=function(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)},et=Object.assign({},e,require("d3-shape"),require("d3-format"),require("d3-axis"),require("d3-selection"),require("d3-color"),require("d3-scale")),at=[{x:0,y:-310},{x:-14,y:-280},{x:-21,y:-272},{x:-30,y:-264},{x:-90,y:-234},{x:-110,y:-224}],rt=[0,310],nt=[Math.PI,310],it=Object.assign({},e,require("d3-shape"),require("d3-format"),require("d3-axis"),require("d3-selection"),require("d3-color"),require("d3-scale")),ot=(Object.assign({},e,require("d3-format"),require("d3-axis"),require("d3-color"),require("d3-scale")),{standard:{min:-25,"è¿‡ä½":[-20,-8,-7,-6,-5,-4,-3,-2,-1,0,1,2,3,4,5,6],"åä½":[-12,-10,-7,-6,-5,-4,-3,-2,-1,0,1,2,3,4,5,6],"æ­£å¸¸":[0,8,-7,-6,-5,-4,-3,-2,-1,0,1,2,3,4,5,6],"åé«˜":[5,0,-7,-6,-5,-4,-3,-2,-1,0,1,2,3,4,5,6],"è¿‡é«˜":[20,4,-7,-6,-5,-4,-3,-2,-1,0,1,2,3,4,5,6],max:25},data:{"ç»´ç”Ÿç´ A":16,"ç»´ç”Ÿç´ B1":19,"ç»´ç”Ÿç´ B2":-14,"ç»´ç”Ÿç´ B3":-5,"ç»´ç”Ÿç´ B5":-8,"ç»´ç”Ÿç´ B6":13,"ç»´ç”Ÿç´ B7":6,"ç»´ç”Ÿç´ B9":-20,"ç»´ç”Ÿç´ B12":9,"ç»´ç”Ÿç´ C":-16,"èƒ¡èåœç´ ":-18,"ç»´ç”Ÿç´ E":-7,"ç‰›ç£ºé…¸":2,"è¾…é…¶Q":-7,"å¼‚é»„é…®":-21,"ç»´ç”Ÿç´ K":-7}}),lt={nodes:[{name:"ç»´ç”Ÿç´ A"},{name:"ç»´ç”Ÿç´ B1"},{name:"ç»´ç”Ÿç´ B2"},{name:"ç»´ç”Ÿç´ B3"},{name:"ç»´ç”Ÿç´ B5"},{name:"ç»´ç”Ÿç´ B6"},{name:"ç»´ç”Ÿç´ B7"},{name:"ç»´ç”Ÿç´ B9"},{name:"ç»´ç”Ÿç´ B12"},{name:"ç»´ç”Ÿç´ C"},{name:"èƒ¡èåœç´ "},{name:"ç»´ç”Ÿç´ E"},{name:"ç‰›ç£ºé…¸"},{name:"è¾…é…¶Q"},{name:"å¼‚é»„é…®"},{name:"ç»´ç”Ÿç´ K"},{name:"å®¶ç•œç±»"},{name:"è”¬èœç±»"},{name:"è±†ç±»"},{name:"å®¶ç¦½ç±»"},{name:"æ°´æœç±»"},{name:"åšæœç±»"},{name:"å‘é…µé£Ÿç‰©ç±»"},{name:"è„å™¨ç±»"},{name:"è°·ç‰©ç±»"},{name:"å¥¶è›‹ç±»"}],links:[{source:0,target:21,value:5},{source:1,target:18,value:5},{source:1,target:22,value:5},{source:2,target:16,value:5},{source:2,target:19,value:5},{source:2,target:24,value:5},{source:2,target:22,value:5},{source:3,target:24,value:5},{source:3,target:19,value:5},{source:4,target:16,value:5},{source:4,target:17,value:5},{source:4,target:21,value:5},{source:4,target:22,value:5},{source:5,target:17,value:5},{source:5,target:23,value:5},{source:5,target:21,value:5},{source:6,target:20,value:5},{source:6,target:19,value:5},{source:6,target:21,value:5},{source:6,target:23,value:5},{source:7,target:17,value:5},{source:7,target:18,value:5},{source:7,target:20,value:5},{source:7,target:23,value:5},{source:8,target:20,value:5},{source:8,target:21,value:5},{source:8,target:22,value:5},{source:8,target:23,value:5},{source:9,target:18,value:5},{source:9,target:19,value:5},{source:9,target:20,value:5},{source:10,target:19,value:5},{source:10,target:20,value:5},{source:10,target:22,value:5},{source:10,target:25,value:5},{source:11,target:16,value:5},{source:11,target:20,value:5},{source:12,target:17,value:5},{source:12,target:18,value:5},{source:12,target:19,value:5},{source:12,target:20,value:5},{source:12,target:21,value:5},{source:12,target:23,value:5},{source:12,target:24,value:5},{source:12,target:25,value:5},{source:13,target:17,value:5},{source:13,target:19,value:5},{source:13,target:20,value:5},{source:14,target:25,value:5},{source:15,target:19,value:5},{source:15,target:19,value:5},{source:15,target:21,value:5},{source:15,target:23,value:5}]},st=Object.assign({},e,require("d3-shape"),require("d3-array"),require("d3-format"),require("d3-sankey"),require("d3-selection"),require("d3-request"),require("d3-axis"),require("d3-color"),require("d3-scale")),ct={text:"dadad",data:{"ç»´ç”Ÿç´ a":{en:"adaeda",value:20},"ç»´ç”Ÿç´ b":{en:"",value:25},"ç»´ç”Ÿç´ c":{en:"",value:92},"ç»´ç”Ÿç´ d":{en:"",value:78},"ç»´ç”Ÿç´ e":{en:"",value:43},"ç»´ç”Ÿç´ f":{en:"",value:96},"ç»´ç”Ÿç´ g":{en:"",value:32},"ç»´ç”Ÿç´ h":{en:"",value:79},"ç»´ç”Ÿç´ i":{en:"",value:82},"ç»´ç”Ÿç´ j":{en:"",value:45},"ç»´ç”Ÿç´ k":{en:"",value:53},"ç»´ç”Ÿç´ l":{en:"",value:98},"ç»´ç”Ÿç´ m":{en:"",value:92},"ç»´ç”Ÿç´ n":{en:"",value:48},"ç»´ç”Ÿç´ o":{en:"",value:84},"ç»´ç”Ÿç´ p":{en:"",value:92}}},ut=Object.assign({},e,require("d3-shape"),require("d3-format"),require("d3-selection"),require("d3-request"),require("d3-drag"),require("d3-array"),require("d3-color"),require("d3-scale")),dt={normal:8,data:{bileAcid:6,cholesterol:2}},ft=Object.assign({},e,require("d3-shape"),require("d3-format"),require("d3-selection"),require("d3-request"),require("d3-drag"),require("d3-color"),require("d3-axis"),require("d3-scale")),ht={gap:[15500,18e3,22e3,25e3],indicator:{value:21900,text:{cn:"æ£€æµ‹å€¼",en:"adad"}},average:{value:22e3,text:{cn:"å‡å€¼",en:"adad"}},median:{value:21e3,text:{cn:"ä¸­ä½æ•°",en:"adad"}},axisFontSize:24,data:[{x:[14e3,14500],y:.0025},{x:[14500,15e3],y:.003},{x:[15e3,15500],y:.0038},{x:[15500,16e3],y:.01},{x:[16e3,16500],y:.018},{x:[16500,17e3],y:.03},{x:[17e3,17500],y:.015},{x:[17500,18e3],y:.026},{x:[18e3,18500],y:.026},{x:[18500,19e3],y:.034},{x:[19e3,19500],y:.05},{x:[19500,2e4],y:.05},{x:[2e4,20500],y:.07},{x:[20500,21e3],y:.078},{x:[21e3,21500],y:.083},{x:[21500,22e3],y:.072},{x:[22e3,22500],y:.08},{x:[22500,23e3],y:.078},{x:[23e3,23500],y:.075},{x:[23500,24e3],y:.075},{x:[24e3,24500],y:.056},{x:[24500,25e3],y:.059},{x:[25e3,25500],y:.043},{x:[25500,26e3],y:.037},{x:[26e3,26500],y:.028},{x:[26500,27e3],y:.018},{x:[27e3,27500],y:.012},{x:[27500,28e3],y:.01},{x:[28e3,28500],y:.003}]},gt=["#cb8d88","#e4be6f","#00ab84","#e4be6f","#cb8d88"],vt=Object.assign({},e,require("d3-shape"),require("d3-format"),require("d3-selection"),require("d3-request"),require("d3-drag"),require("d3-color"),require("d3-array"),require("d3-random"),require("d3-axis"),require("d3-scale")),pt=[.22,.7],xt=[.03,.15,.85,.97],yt={width:600,height:80,data:[.2,.3,.4,.9]},mt={width:300,height:80,data:[.2,.6]},bt=["#cb8d88","#e4be6f","#00ab84","#e4be6f","#cb8d88"],kt=Object.assign({},e,require("d3-shape"),require("d3-format"),require("d3-selection"),require("d3-request"),require("d3-drag"),require("d3-array"),require("d3-color"),require("d3-scale")),At={top:[{x:-7,y:5,color:"seagreen",tag:{cn:"å¤´å­¢èŒç´ ç±»",en:"Cephalosporins"},data:{rank:.2807,median:117.4241,absolute:59.31948},direction:"left"},{x:-6,y:7,color:"seagreen",tag:{cn:"é’éœ‰ç´ ",en:"Penicillins"},data:{rank:.2506,median:128.4729,absolute:61.05134},direction:"left"},{x:-5,y:8,color:"seagreen",tag:{cn:"æ—å¯é…°èƒºç±»",en:"Lincosamides"},data:{rank:.606,median:383.8253,absolute:441.8302},direction:"right"},{x:-4,y:6,color:"seagreen",tag:{cn:"åˆ©ç¦éœ‰ç´ ç±»",en:"Rifampins"},data:{rank:.0012,median:0,absolute:0},direction:"right"},{x:-3,y:2,color:"seagreen",tag:{cn:"å¤šç²˜éœ‰ç´ ç±»",en:"Polymyxins"},data:{rank:.4012,median:4.5278814,absolute:2.895497},direction:"right"},{x:1,y:1,color:"orange",tag:{cn:"ç¢³é’éœ‰çƒ¯ç±»",en:"Carbapenems"},data:{rank:.0012,median:0,absolute:0},direction:"left"},{x:2,y:4,color:"orange",tag:{cn:"ç³–è‚½ç±»",en:"Glycopeptides"},data:{rank:.5807,median:1.63446,absolute:2.246455},direction:"right"},{x:5,y:3,color:"salmon",tag:{cn:"æ°¨åŸºç³–è‹·ç±»",en:"Aminoglycosides"},data:{rank:.7506,median:41.34121,absolute:71.78424},direction:"left"}],bottom:[{x:-2,y:1,color:"seagreen",tag:{cn:"Î²-å†…é…°èƒº",en:"Î²-lactam"},data:{rank:.7265,median:.08101419,absolute:.6476569},direction:"left"},{x:-1,y:3,color:"seagreen",tag:{cn:"å››ç¯ç±»ç´ ",en:"Tetracyclines"},data:{rank:.5771,median:362.3124,absolute:385.8537},direction:"left"},{x:0,y:4,color:"orange",tag:{cn:"ç£·éœ‰ç´ ç±»",en:"Fosfomycins"},data:{rank:.659,median:.3104377,absolute:1.35659},direction:"right"},{x:3,y:5,color:"orange",tag:{cn:"æ°¯éœ‰ç´ ç±»",en:"Chloramphenicois"},data:{rank:.0012,median:362.3124,absolute:385.8537},direction:"left"},{x:4,y:6,color:"orange",tag:{cn:"å¤§ç¯å†…é…¯ç±»",en:"Macrolides"},data:{rank:.4843,median:354.3231,absolute:359.5278},direction:"right"},{x:6,y:7,color:"salmon",tag:{cn:"ç£ºèƒºç±»",en:"Sulfonamides"},data:{rank:.8795,median:34.39402,absolute:116.4283},direction:"left"},{x:7,y:2,color:"salmon",tag:{cn:"å¥è¯ºé…®ç±»",en:"Quinolones"},data:{rank:.8036,median:0,absolute:.8209219},direction:"right"}],gap:[0,4]},qt=function(t,e){return t.indexOf(e)+1},wt={},St=[/@/g,"_e.",/AND/gi,"&&",/OR/gi,"||",/<>/g,"!=",/NOT/gi,"!",/([^=<>])=([^=]|$)/g,"$1==$2"],Pt=/""/g,Lt=/!~/g,Rt=function(t){return(0,eval)("0,"+t)},Mt=function(t){for(var e=(t=t.replace(Pt,"!~")).split('"'),a=e.length,r=St.length,n=0;n<a;n+=2){for(var i=e[n],o=0;o<r;o+=2)qt(i,St[o])>-1&&(i=i.replace(St[o],St[o+1]));e[n]=i}for(n=1;n<a;n+=2)e[n]=e[n].replace(Lt,'\\"');return e.join('"')},Ot=function(t){var e=[],a=-1;for(var r in t){var n=t[r];n!=F.prototype[r]&&$C&&(e[++a]=n)}return e}.toString(),Et=function(t){if(!t)return[];var e=wt[t];try{if(!e){var a=Mt(t);a=Ot.replace("$C",a),e=wt[t]=Rt(a)}return e(this.data)}catch(t){return[]}};F.prototype={constructor:F,Query:Et};var jt=Object.assign({},e,require("d3-shape"),require("d3-format"),require("d3-selection"),require("d3-request"),require("d3-drag"),require("d3-color"),require("d3-scale"));W.prototype={constructor:zt,init:I,topLeft:D,topRight:T,bottomRight:N,bottomLeft:G,index:""};var zt=new W;Object.values=function(t){return Object.keys(t).reduce(function(e,a){return e.push(t[a])&&e},[])},"function"!=typeof Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");t=Object(t);for(var e=1;e<arguments.length;e++){var a=arguments[e];if(null!=a)for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t}),t.estimateAntibiotics=zt,t.intakeSugarDistribution=f,t.intakeFiberStruct=h,t.scoreLevel=v,t.intakeFatProportion=m,t.intakeFatDeviation=b,t.curveGraph=A,t.linkGraph=q,t.estimateFiber=w,t.amountBile=S,t.metabolism=P,t.lineRect5=L,t.lineRect3=R,t.vLineRect5=z,t.vLineRect3=B,Object.defineProperty(t,"__esModule",{value:!0})});